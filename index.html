<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="manifest.json">
    <!-- Preconnect hints -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://www.gstatic.com">
    <link rel="preconnect" href="https://unpkg.com">
    <!-- Preload critical scripts -->
    <link rel="preload" href="https://unpkg.com/react@18/umd/react.production.min.js" as="script" crossorigin>
    <link rel="preload" href="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" as="script" crossorigin>
    <title>ToDo„É™„Çπ„Éà Pro - Focus Layout</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700;900&family=Roboto:wght@400;500;700;900&family=JetBrains+Mono:wght@700&display=swap"
        rel="stylesheet">
    <!-- Pre-built Tailwind CSS -->
    <link rel="stylesheet" href="tailwind.css">
    <!-- Firebase SDK (deferred - DOMContentLoaded „ÅßÂàùÊúüÂåñ„Åô„Çã„Åü„ÇÅ) -->
    <script defer src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/10.7.1/firebase-messaging-compat.js"></script>
    <script>
        // üö® Global Error Handler for Debugging
        window.onerror = function (msg, url, line, col, error) {
            document.body.innerHTML = `
                <div style="padding:20px;color:red;font-family:monospace;background:#fff8f8;border:2px solid red;margin:20px;border-radius:10px;">
                    <h2 style="margin-top:0;">‚ö†Ô∏è Application Crash Detected</h2>
                    <p><strong>Error:</strong> ${msg}</p>
                    <p><strong>Location:</strong> Line ${line}, Col ${col}</p>
                    <pre style="background:#eee;padding:10px;overflow:auto;">${error ? error.stack : 'No stack trace available'}</pre>
                </div>
            `;
            return false;
        };
    </script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <style>
        body {
            font-family: 'Roboto', 'Noto Sans JP', sans-serif;
            -webkit-font-smoothing: antialiased;
        }

        @keyframes confetti-explode {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }

            60% {
                opacity: 1;
            }

            100% {
                transform: translate(var(--tx), var(--ty)) scale(0);
                opacity: 0;
            }
        }

        @keyframes cherry-fall {
            0% {
                transform: translate(0, 0) rotate(0deg);
                opacity: 1;
            }

            100% {
                transform: translate(var(--tx), var(--ty)) rotate(720deg);
                opacity: 0;
            }
        }

        @keyframes confetti-rise {
            0% {
                transform: translateX(0) translateY(0) rotate(0deg);
                opacity: 1;
            }

            50% {
                opacity: 1;
            }

            100% {
                transform: translateX(var(--random-x)) translateY(-100vh) rotate(var(--random-rotation));
                opacity: 0;
            }
        }

        /* ‰∏≠ÊØíÊÄßMAXÂ†±ÈÖ¨„Ç∑„Çπ„ÉÜ„É†„ÅÆ„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ */
        @keyframes near-miss-flash {
            0% {
                opacity: 0;
            }

            30% {
                opacity: 1;
            }

            100% {
                opacity: 0;
            }
        }

        @keyframes reward-particle {
            0% {
                transform: translate(0, 0);
                opacity: 1;
            }

            100% {
                transform: translate(var(--vx), var(--vy));
                opacity: 0;
            }
        }

        @keyframes reward-fall {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }

            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        @keyframes big-flash {
            0% {
                opacity: 0;
            }

            20% {
                opacity: 1;
            }

            100% {
                opacity: 0;
            }
        }

        @keyframes jackpot-flash {
            0% {
                opacity: 0;
            }

            30% {
                opacity: 1;
            }

            100% {
                opacity: 0;
            }
        }

        @keyframes screen-shake {

            0%,
            100% {
                transform: translate(0, 0);
            }

            10%,
            30%,
            50%,
            70%,
            90% {
                transform: translate(-5px, 5px);
            }

            20%,
            40%,
            60%,
            80% {
                transform: translate(5px, -5px);
            }
        }

        @keyframes jackpot-text {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0;
            }

            20% {
                transform: translate(-50%, -50%) scale(1.3);
                opacity: 1;
            }

            50% {
                transform: translate(-50%, -50%) scale(1);
            }

            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 0;
            }
        }

        @keyframes anticipation-glow {

            0%,
            100% {
                box-shadow: 0 0 0 rgba(255, 215, 0, 0);
            }

            50% {
                box-shadow: 0 0 30px rgba(255, 215, 0, 0.8);
            }
        }

        @keyframes anticipation-pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }
        }

        @keyframes gem-absorb {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }

            50% {
                transform: translate(calc((var(--target-x) - 50%) / 2), calc((var(--target-y) - 50%) / 2)) scale(1.2);
                opacity: 1;
            }

            100% {
                transform: translate(calc(var(--target-x) - 50%), calc(var(--target-y) - 50%)) scale(0.5);
                opacity: 0;
            }
        }

        @keyframes forecast-flash {
            0% {
                opacity: 0;
                transform: scale(0.8);
            }

            30% {
                opacity: 0.8;
                transform: scale(1.1);
            }

            100% {
                opacity: 0;
                transform: scale(1);
            }
        }

        @keyframes buildup-pulse {

            0%,
            100% {
                opacity: 0.3;
                transform: scale(1);
            }

            50% {
                opacity: 0.5;
                transform: scale(1.02);
            }
        }

        @keyframes buildup-shake {

            0%,
            100% {
                transform: translate(-50%, -50%) rotate(0deg);
            }

            25% {
                transform: translate(-50%, -50%) translate(-3px, 3px) rotate(-1deg);
            }

            75% {
                transform: translate(-50%, -50%) translate(3px, -3px) rotate(1deg);
            }
        }

        @keyframes feint-flash {
            0% {
                opacity: 0;
            }

            30% {
                opacity: 0.5;
            }

            100% {
                opacity: 0;
            }
        }

        @keyframes near-miss-text {
            0% {
                transform: translate(-50%, -50%) scale(0.5);
                opacity: 0;
            }

            30% {
                transform: translate(-50%, -50%) scale(1.1);
                opacity: 1;
            }

            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 0;
            }
        }

        @keyframes cracker-shoot {
            0% {
                transform: translate(0, 0) rotate(0deg) scale(1);
                opacity: 1;
            }

            70% {
                opacity: 1;
            }

            100% {
                transform: translate(calc(var(--target-x) - 50vw), calc(var(--target-y) - 50vh)) rotate(var(--rotation)) scale(0.3);
                opacity: 0;
            }
        }

        /* ÂÆåÂÖ®‰æùÂ≠ò„É¨„Éô„É´„ÅÆÊºîÂá∫„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ */
        @keyframes near-miss-intense {
            0% {
                opacity: 0;
            }

            30% {
                opacity: 1;
            }

            70% {
                opacity: 0.8;
            }

            100% {
                opacity: 0;
            }
        }

        @keyframes whiff-darken {
            0% {
                opacity: 0;
            }

            50% {
                opacity: 1;
            }

            100% {
                opacity: 0;
            }
        }

        @keyframes whiff-fade {
            0% {
                transform: translate(0, 0);
                opacity: 1;
            }

            100% {
                transform: translate(var(--vx), var(--vy));
                opacity: 0;
            }
        }

        @keyframes normal-flash {
            0% {
                opacity: 0;
            }

            40% {
                opacity: 1;
            }

            100% {
                opacity: 0;
            }
        }

        @keyframes ring-expand {
            0% {
                transform: scale(1);
                opacity: 1;
            }

            100% {
                transform: scale(15);
                opacity: 0;
            }
        }

        @keyframes reward-particle-glow {
            0% {
                transform: translate(0, 0);
                opacity: 1;
            }

            100% {
                transform: translate(var(--vx), var(--vy));
                opacity: 0;
            }
        }

        @keyframes big-rainbow-flash {
            0% {
                opacity: 0;
            }

            30% {
                opacity: 1;
            }

            70% {
                opacity: 0.8;
            }

            100% {
                opacity: 0;
            }
        }

        @keyframes beam-pulse {

            0%,
            100% {
                opacity: 0.4;
            }

            50% {
                opacity: 1;
            }
        }

        @keyframes explosion {
            0% {
                transform: scale(0);
                opacity: 1;
            }

            50% {
                transform: scale(1.5);
                opacity: 0.8;
            }

            100% {
                transform: scale(3);
                opacity: 0;
            }
        }

        @keyframes reward-fall-glow {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }

            100% {
                transform: translateY(100vh) rotate(1080deg);
                opacity: 0;
            }
        }

        @keyframes big-text {
            0% {
                transform: translate(-50%, -50%) scale(0) rotate(-20deg);
                opacity: 0;
            }

            30% {
                transform: translate(-50%, -50%) scale(1.3) rotate(5deg);
                opacity: 1;
            }

            50% {
                transform: translate(-50%, -50%) scale(1) rotate(0deg);
            }

            100% {
                transform: translate(-50%, -50%) scale(1) rotate(0deg);
                opacity: 0;
            }
        }

        @keyframes jackpot-mega-flash {
            0% {
                opacity: 0;
            }

            20% {
                opacity: 1;
            }

            50% {
                opacity: 0.9;
            }

            80% {
                opacity: 1;
            }

            100% {
                opacity: 0;
            }
        }

        @keyframes screen-shake-intense {

            0%,
            100% {
                transform: translate(0, 0);
            }

            5%,
            15%,
            25%,
            35%,
            45%,
            55%,
            65%,
            75%,
            85%,
            95% {
                transform: translate(-10px, 10px);
            }

            10%,
            20%,
            30%,
            40%,
            50%,
            60%,
            70%,
            80%,
            90% {
                transform: translate(10px, -10px);
            }
        }

        @keyframes mega-wave-expand {
            0% {
                transform: scale(1);
                opacity: 1;
            }

            100% {
                transform: scale(30);
                opacity: 0;
            }
        }

        @keyframes spiral-rotate-cw {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        @keyframes spiral-rotate-ccw {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(-360deg);
            }
        }

        @keyframes starburst-pulse {
            0% {
                opacity: 0;
                transform: scale(0);
            }

            30% {
                opacity: 1;
                transform: scale(1);
            }

            100% {
                opacity: 0;
                transform: scale(1.5);
            }
        }

        @keyframes reward-fall-mega-glow {
            0% {
                transform: translateY(0) rotate(0deg) scale(1);
                opacity: 1;
            }

            100% {
                transform: translateY(100vh) rotate(1440deg) scale(0.5);
                opacity: 0;
            }
        }

        @keyframes jackpot-mega-text {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0;
            }

            20% {
                transform: translate(-50%, -50%) scale(1.5);
                opacity: 1;
            }

            40% {
                transform: translate(-50%, -50%) scale(0.9);
            }

            50% {
                transform: translate(-50%, -50%) scale(1.1);
            }

            60% {
                transform: translate(-50%, -50%) scale(1);
            }

            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
        }

        @keyframes jackpot-subtext {
            0% {
                opacity: 0;
                transform: translateY(50px);
            }

            50% {
                opacity: 1;
                transform: translateY(0);
            }

            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ‰∏≠ÊØíÊÄßMAXÂÆùÁÆ±„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ */
        @keyframes chest-float {

            0%,
            100% {
                transform: translateY(0px) rotate(-2deg);
            }

            50% {
                transform: translateY(-15px) rotate(2deg);
            }
        }

        @keyframes chest-shake-anticipation {

            0%,
            100% {
                transform: rotate(0deg);
            }

            25% {
                transform: rotate(-5deg);
            }

            75% {
                transform: rotate(5deg);
            }
        }

        @keyframes chest-lid-open {
            0% {
                transform: rotateX(0deg);
                transform-origin: bottom;
            }

            100% {
                transform: rotateX(-120deg);
                transform-origin: bottom;
            }
        }

        @keyframes chest-glow-pulse {

            0%,
            100% {
                box-shadow: 0 0 20px rgba(150, 180, 255, 0.5), 0 0 40px rgba(100, 150, 255, 0.3);
            }

            50% {
                box-shadow: 0 0 40px rgba(150, 180, 255, 0.8), 0 0 80px rgba(100, 150, 255, 0.6), 0 0 120px rgba(80, 130, 255, 0.4);
            }
        }

        @keyframes sparkle-twinkle {

            0%,
            100% {
                opacity: 0;
                transform: scale(0) rotate(0deg);
            }

            50% {
                opacity: 1;
                transform: scale(1) rotate(180deg);
            }
        }

        @keyframes light-ray-rotate {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        @keyframes chest-burst-open {
            0% {
                transform: scale(1);
                opacity: 1;
            }

            50% {
                transform: scale(1.2);
            }

            100% {
                transform: scale(1);
                opacity: 0;
            }
        }

        @keyframes reward-emerge {
            0% {
                transform: translateY(50px) scale(0);
                opacity: 0;
            }

            60% {
                transform: translateY(-20px) scale(1.2);
                opacity: 1;
            }

            100% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }

        /* „ÇÆ„É£„É≥„Éñ„É´‰æùÂ≠òÊÄßÔºöÂÆùÁÆ±„ÅÆ‰∫àÂëäÔºÜ„Éã„Ç¢„Éü„ÇπÊºîÂá∫ */
        @keyframes chest-anticipation-shake {

            0%,
            100% {
                transform: translate(0, 0) rotate(0deg) scale(1);
            }

            10% {
                transform: translate(-8px, -8px) rotate(-10deg) scale(1.05);
            }

            20% {
                transform: translate(8px, 8px) rotate(10deg) scale(1.05);
            }

            30% {
                transform: translate(-8px, 8px) rotate(-10deg) scale(1.05);
            }

            40% {
                transform: translate(8px, -8px) rotate(10deg) scale(1.05);
            }

            50% {
                transform: translate(-6px, -6px) rotate(-8deg) scale(1.03);
            }

            60% {
                transform: translate(6px, 6px) rotate(8deg) scale(1.03);
            }

            70% {
                transform: translate(-4px, 4px) rotate(-5deg) scale(1.02);
            }

            80% {
                transform: translate(4px, -4px) rotate(5deg) scale(1.02);
            }

            90% {
                transform: translate(-2px, 2px) rotate(-2deg) scale(1.01);
            }
        }

        @keyframes chest-color-tease {
            0% {
                filter: hue-rotate(0deg) brightness(1) saturate(1);
            }

            20% {
                filter: hue-rotate(60deg) brightness(1.3) saturate(1.8);
            }

            40% {
                filter: hue-rotate(120deg) brightness(1.5) saturate(2);
            }

            60% {
                filter: hue-rotate(180deg) brightness(1.7) saturate(2.2);
            }

            80% {
                filter: hue-rotate(240deg) brightness(1.5) saturate(2);
            }

            100% {
                filter: hue-rotate(300deg) brightness(1.3) saturate(1.8);
            }
        }

        @keyframes chest-glow-intensify {
            0% {
                box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
            }

            25% {
                box-shadow: 0 0 60px rgba(255, 100, 255, 1), 0 0 100px rgba(255, 100, 255, 0.8);
            }

            50% {
                box-shadow: 0 0 80px rgba(255, 50, 50, 1), 0 0 120px rgba(255, 50, 50, 0.9), 0 0 160px rgba(255, 50, 50, 0.7);
            }

            75% {
                box-shadow: 0 0 60px rgba(100, 255, 255, 1), 0 0 100px rgba(100, 255, 255, 0.8);
            }

            100% {
                box-shadow: 0 0 80px rgba(255, 215, 0, 1), 0 0 120px rgba(255, 215, 0, 0.9);
            }
        }

        @keyframes near-miss-flash {
            0% {
                opacity: 0;
                transform: scale(1);
            }

            30% {
                opacity: 1;
                transform: scale(1.2);
            }

            60% {
                opacity: 0.8;
                transform: scale(1.1);
            }

            100% {
                opacity: 0;
                transform: scale(1.3);
            }
        }

        @keyframes heartbeat-pulse {

            0%,
            100% {
                transform: scale(1);
            }

            10% {
                transform: scale(1.1);
            }

            20% {
                transform: scale(1);
            }

            30% {
                transform: scale(1.15);
            }

            40% {
                transform: scale(1);
            }
        }

        /* „Ç´„Ç∏„Éé„Ç∞„É¨„Éº„ÉâÊºîÂá∫ÔºöÁâ©ÁêÜ„Å™„Åó„ÉªÈ´òÁ¥ö„Ç∏„É•„Éº„Çπ */
        @keyframes spatial-distortion {
            0% {
                transform: scale(1) skewX(0deg);
            }

            25% {
                transform: scale(1.05) skewX(5deg);
            }

            50% {
                transform: scale(0.95) skewX(-5deg);
            }

            75% {
                transform: scale(1.02) skewX(2deg);
            }

            100% {
                transform: scale(1) skewX(0deg);
            }
        }

        @keyframes chromatic-aberration {
            0% {
                text-shadow: 0 0 0 rgba(255, 0, 0, 0), 0 0 0 rgba(0, 255, 255, 0);
            }

            50% {
                text-shadow: -5px 0 0 rgba(255, 0, 0, 0.8), 5px 0 0 rgba(0, 255, 255, 0.8);
            }

            100% {
                text-shadow: 0 0 0 rgba(255, 0, 0, 0), 0 0 0 rgba(0, 255, 255, 0);
            }
        }

        @keyframes light-convergence {
            0% {
                transform: scale(3);
                opacity: 0;
            }

            50% {
                transform: scale(0.5);
                opacity: 1;
            }

            100% {
                transform: scale(0);
                opacity: 0;
            }
        }

        @keyframes whiteout-burst {
            0% {
                opacity: 0;
            }

            30% {
                opacity: 1;
            }

            100% {
                opacity: 0;
            }
        }

        @keyframes screen-shake-brutal {

            0%,
            100% {
                transform: translate(0, 0);
            }

            10% {
                transform: translate(-15px, 10px);
            }

            20% {
                transform: translate(15px, -10px);
            }

            30% {
                transform: translate(-10px, -15px);
            }

            40% {
                transform: translate(10px, 15px);
            }

            50% {
                transform: translate(-12px, 8px);
            }

            60% {
                transform: translate(12px, -8px);
            }

            70% {
                transform: translate(-8px, -12px);
            }

            80% {
                transform: translate(8px, 12px);
            }

            90% {
                transform: translate(-5px, 5px);
            }
        }

        @keyframes resistance-denial {
            0% {
                transform: translateX(0) rotate(0deg);
            }

            10% {
                transform: translateX(-20px) rotate(-15deg);
            }

            20% {
                transform: translateX(15px) rotate(10deg);
            }

            30% {
                transform: translateX(-10px) rotate(-8deg);
            }

            40% {
                transform: translateX(5px) rotate(5deg);
            }

            50% {
                transform: translateX(-3px) rotate(-3deg);
            }

            100% {
                transform: translateX(0) rotate(0deg);
            }
        }

        @keyframes jackpot-peek {
            0% {
                opacity: 0;
                transform: translateY(30px) scale(0.5);
            }

            40% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }

            60% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }

            100% {
                opacity: 0;
                transform: translateY(-30px) scale(0.8);
            }
        }

        @keyframes charge-buildup {
            0% {
                box-shadow: 0 0 0 rgba(100, 150, 255, 0);
                transform: scale(1);
            }

            100% {
                box-shadow: 0 0 50px rgba(100, 150, 255, 1), 0 0 100px rgba(100, 150, 255, 0.8), 0 0 150px rgba(100, 150, 255, 0.6);
                transform: scale(1.15);
            }
        }

        @keyframes roulette-spin {
            0% {
                transform: translateY(0);
            }

            100% {
                transform: translateY(-500%);
            }
        }

        @keyframes roulette-slowdown {
            0% {
                transform: translateY(0);
            }

            100% {
                transform: translateY(-100%);
            }
        }

        @keyframes slot-stop-slam {
            0% {
                transform: translateY(0) scale(1);
            }

            20% {
                transform: translateY(-30px) scale(1.15);
            }

            50% {
                transform: translateY(10px) scale(0.9);
            }

            80% {
                transform: translateY(-5px) scale(1.05);
            }

            100% {
                transform: translateY(0) scale(1);
            }
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background-color: #dadce0;
            border-radius: 4px;
        }

        .progress-glow {
            filter: drop-shadow(0 0 4px rgba(255, 255, 255, 0.8)) brightness(1.2);
        }

        .fire-active {
            animation: flame-grow 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        /* ChestModal: ÊÆµÈöéÁöÑÊòáÊ†º„ÅÆÂÑÄÂºè - „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ */
        @keyframes flash {
            0% {
                opacity: 0;
                transform: scale(0.8);
            }

            50% {
                opacity: 1;
                transform: scale(1.2);
            }

            100% {
                opacity: 0;
                transform: scale(1);
            }
        }

        @keyframes glitch {

            0%,
            100% {
                transform: translate(0, 0) skew(0deg);
                opacity: 1;
            }

            10% {
                transform: translate(-5px, 2px) skew(-2deg);
                opacity: 0.8;
                filter: hue-rotate(90deg);
            }

            20% {
                transform: translate(3px, -3px) skew(1deg);
                opacity: 0.9;
                filter: hue-rotate(180deg);
            }

            30% {
                transform: translate(-2px, 4px) skew(-1deg);
                opacity: 0.7;
                filter: hue-rotate(270deg);
            }

            40% {
                transform: translate(4px, -2px) skew(2deg);
                opacity: 0.9;
                filter: hue-rotate(0deg);
            }

            50% {
                transform: translate(-3px, 3px) skew(-2deg);
                opacity: 0.8;
                filter: hue-rotate(90deg);
            }

            60% {
                transform: translate(2px, -4px) skew(1deg);
                opacity: 0.9;
                filter: hue-rotate(180deg);
            }

            70% {
                transform: translate(-4px, 2px) skew(-1deg);
                opacity: 0.7;
                filter: hue-rotate(270deg);
            }

            80% {
                transform: translate(3px, -3px) skew(2deg);
                opacity: 0.9;
                filter: hue-rotate(0deg);
            }

            90% {
                transform: translate(-2px, 4px) skew(-2deg);
                opacity: 0.8;
                filter: hue-rotate(90deg);
            }
        }

        @keyframes gem-scatter-absorb {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }

            30% {
                transform: translate(var(--scatter-x), var(--scatter-y)) scale(1.5) rotate(720deg);
                opacity: 1;
            }

            31% {
                transform: translate(var(--scatter-x), var(--scatter-y)) scale(1.5) rotate(720deg);
                opacity: 1;
            }

            100% {
                transform: translate(calc(50vw - 50%), calc(-50vh + 100px)) scale(0.3) rotate(1080deg);
                opacity: 0;
            }
        }

        @keyframes burn-overlay {
            0% {
                opacity: 0;
                transform: scale(0.8);
            }

            30% {
                opacity: 1;
                transform: scale(1.2);
            }

            70% {
                opacity: 1;
                transform: scale(1);
            }

            100% {
                opacity: 0;
                transform: scale(0.9);
            }
        }

        @keyframes screen-shake {

            0%,
            100% {
                transform: translate(0, 0);
            }

            10% {
                transform: translate(-5px, 2px);
            }

            20% {
                transform: translate(5px, -2px);
            }

            30% {
                transform: translate(-5px, 2px);
            }

            40% {
                transform: translate(5px, -2px);
            }

            50% {
                transform: translate(-5px, 2px);
            }

            60% {
                transform: translate(5px, -2px);
            }

            70% {
                transform: translate(-5px, 2px);
            }

            80% {
                transform: translate(5px, -2px);
            }

            90% {
                transform: translate(-5px, 2px);
            }
        }

        /* ChestModal: The Void - ÊµÆÈÅä„Å®Èúß„ÅÆ„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ */
        @keyframes float-particle {

            0%,
            100% {
                transform: translate(0, 0) scale(1);
                opacity: 0.3;
            }

            50% {
                transform: translate(10px, -20px) scale(1.2);
                opacity: 0.6;
            }
        }

        @keyframes float-chest {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes aura-intense {

            0%,
            100% {
                opacity: 0.6;
                transform: scale(1);
            }

            50% {
                opacity: 1;
                transform: scale(1.2);
            }
        }

        /* Tier-specific classes */
        .tier-void {
            filter: brightness(0.7) contrast(1.2);
        }

        .tier-bronze {
            filter: brightness(1) contrast(1.1);
        }

        .tier-gold {
            filter: brightness(1.3) contrast(1.2) saturate(1.5);
        }

        .tier-rainbow {
            filter: brightness(1.5) contrast(1.3) saturate(2);
            animation: rainbow-pulse 1s ease-in-out infinite;
        }

        @keyframes rainbow-pulse {

            0%,
            100% {
                filter: brightness(1.5) contrast(1.3) saturate(2) hue-rotate(0deg);
            }

            50% {
                filter: brightness(1.8) contrast(1.4) saturate(2.5) hue-rotate(30deg);
            }
        }

        @keyframes gold-glitter {
            0% {
                background-position: -200% center;
            }

            100% {
                background-position: 200% center;
            }
        }

        @keyframes gold-shine {

            0%,
            100% {
                filter: brightness(1) saturate(1);
            }

            50% {
                filter: brightness(1.4) saturate(1.3);
            }
        }
    </style>
</head>

<body class="bg-white h-screen overflow-hidden text-duo-text">
    <div id="root" class="h-full"></div>

    <script src="app.js"></script>
    <!-- Firebase Initialization -->
    <script>
        // „Éá„Éê„ÉÉ„Ç∞Áî®ÔºöÂàùÊúüÁä∂ÊÖã„ÅÆ„Çπ„Çø„ÉñÈñ¢Êï∞
        window.requestNotificationPermission = () => {
            alert('„Ç®„É©„Éº: „Ç¢„Éó„É™„ÅÆÊ∫ñÂÇô„Åå„Åæ„Å†ÁµÇ„Çè„Å£„Å¶„ÅÑ„Åæ„Åõ„ÇìÔºà„É≠„Éº„Éâ‰∏≠„Åæ„Åü„ÅØÂàùÊúüÂåñ„Ç®„É©„ÉºÔºâ„ÄÇ\nÂ∞ë„ÅóÂæÖ„Å£„Å¶„Åã„ÇâÂÜçÂ∫¶„ÅäË©¶„Åó„Åè„Å†„Åï„ÅÑ„ÄÇ');
        };

        document.addEventListener('DOMContentLoaded', async () => {
            const firebaseConfig = {
                apiKey: "AIzaSyBzIHjUneCjIRToqkdsyYL9b1RzVKSEoxg",
                authDomain: "todo-1c26a.firebaseapp.com",
                projectId: "todo-1c26a",
                storageBucket: "todo-1c26a.firebasestorage.app",
                messagingSenderId: "697462680954",
                appId: "1:697462680954:web:5e9f08ecd07b814ccffac3",
                measurementId: "G-6BFDKWQ5ZL"
            };

            try {
                firebase.initializeApp(firebaseConfig);
                const auth = firebase.auth();
                const db = firebase.firestore();
                const messaging = firebase.messaging();

                // „Ç∞„É≠„Éº„Éê„É´„Å´ÂÖ¨ÈñãÔºàReact„Åã„ÇâÂà©Áî®Ôºâ
                window.firebaseAuth = auth;
                window.firebaseDB = db;

                // „Ç∞„É≠„Éº„Éê„É´Èñ¢Êï∞„Å®„Åó„Å¶ÂÖ¨ÈñãÔºàReact„Åã„ÇâÂëº„Å∂„Åü„ÇÅÔºâ
                window.requestNotificationPermission = async () => {
                    console.log('Requesting notification permission...');
                    try {
                        if (!("Notification" in window)) {
                            alert("„Åì„ÅÆÁí∞Â¢É„Åß„ÅØÈÄöÁü•Ê©üËÉΩ„Åå‰Ωø„Åà„Åæ„Åõ„Çì„ÄÇ\niPhone„ÅÆÂ†¥Âêà„ÅØ„ÄåÂÖ±Êúâ„Äç‚Üí„Äå„Éõ„Éº„É†ÁîªÈù¢„Å´ËøΩÂä†„Äç„Åó„Å¶„Åã„Çâ„ÄÅ„Ç¢„Éó„É™„Å®„Åó„Å¶Èñã„ÅÑ„Å¶„Åè„Å†„Åï„ÅÑÔºÅ");
                            return;
                        }

                        const permission = await Notification.requestPermission();
                        if (permission === 'granted') {
                            console.log('Notification permission granted.');

                            try {
                                // Service Worker„ÇíÊòéÁ§∫ÁöÑ„Å´ÂèñÂæó„ÉªÁôªÈå≤
                                let registration;
                                if ('serviceWorker' in navigator) {
                                    // „Åæ„ÅöÊó¢Â≠ò„ÅÆÁôªÈå≤„ÇíÁ¢∫Ë™ç
                                    registration = await navigator.serviceWorker.getRegistration('./');
                                    if (!registration) {
                                        // „Å™„Åë„Çå„Å∞ÁôªÈå≤Ôºà„Çπ„Ç≥„Éº„Éó„ÅØ„Ç´„É¨„É≥„ÉàÔºâ
                                        registration = await navigator.serviceWorker.register('./firebase-messaging-sw.js', { scope: './' });
                                    }
                                    console.log('SW Registered:', registration);
                                }

                                // registration„ÇíÊ∏°„Åó„Å¶getToken„ÇíÂëº„Å∂
                                const token = await messaging.getToken({
                                    serviceWorkerRegistration: registration
                                });
                                console.log('FCM Token:', token);

                                // Firestore„Å´‰øùÂ≠ò
                                try {
                                    const db = firebase.firestore();
                                    await db.collection('fcmTokens').doc(token).set({
                                        token: token,
                                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                                        userAgent: navigator.userAgent
                                    });
                                    console.log('Token saved to Firestore');
                                    alert('„ÄêÊàêÂäü„ÄëË®≠ÂÆöÂÆå‰∫Ü„Åó„Åæ„Åó„ÅüÔºÅ\n„Åì„Çå„ÅßÈÄöÁü•„ÅåÂ±ä„Åç„Åæ„Åô„ÄÇ');
                                } catch (dbError) {
                                    console.error('Error saving to Firestore:', dbError);
                                    alert('„Ç®„É©„Éº: „Éá„Éº„Çø‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åæ„Åó„Åü\n' + dbError.message);
                                }
                            } catch (e) {
                                console.error('Token error:', e);
                                alert('„Ç®„É©„Éº: „Éà„Éº„ÇØ„É≥ÂèñÂæó„Å´Â§±Êïó„Åó„Åæ„Åó„Åü\n' + e.message);
                            }
                        } else {
                            alert('ÈÄöÁü•„Åå„Éñ„É≠„ÉÉ„ÇØ„Åï„Çå„Åæ„Åó„Åü„ÄÇ„Éñ„É©„Ç¶„Ç∂„ÅÆË®≠ÂÆö„Åã„ÇâË®±ÂèØ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                        }
                    } catch (err) {
                        console.error('Error requesting permission:', err);
                        alert('„Ç®„É©„Éº: Ë®±ÂèØ„É™„ÇØ„Ç®„Çπ„Éà„Å´Â§±Êïó„Åó„Åæ„Åó„Åü\n' + err.message);
                    }
                };

                // Service WorkerÁôªÈå≤
                if ('serviceWorker' in navigator) {
                    // GitHub Pages„ÅÆ„Çµ„Éñ„Éá„Ç£„É¨„ÇØ„Éà„É™(/todo-app/)„Å´ÂØæÂøú„Åô„Çã„Åü„ÇÅÁõ∏ÂØæ„Éë„Çπ„Çí‰ΩøÁî®
                    const registration = await navigator.serviceWorker.register('./firebase-messaging-sw.js');
                    console.log('Service Worker registered with scope:', registration.scope);
                }

                // „Éï„Ç©„Ç¢„Ç∞„É©„Ç¶„É≥„Éâ„Åß„ÅÆ„É°„ÉÉ„Çª„Éº„Ç∏Âèó‰ø°
                messaging.onMessage((payload) => {
                    console.log('Message received. ', payload);
                    // „Éï„Ç©„Ç¢„Ç∞„É©„Ç¶„É≥„Éâ„Åß„ÇÇÈÄöÁü•„ÇíË°®Á§∫
                    new Notification(payload.notification.title || 'Todo App', {
                        body: payload.notification.body,
                        icon: '/favicon.ico'
                    });
                });
            } catch (error) {
                console.error('Firebase initialization error:', error);
                // „Ç∞„É≠„Éº„Éê„É´„Ç®„É©„Éº„Éè„É≥„Éâ„É©‰∏äÊõ∏„Åç
                window.requestNotificationPermission = () => {
                    alert('„Ç®„É©„Éº: Firebase„ÅÆËµ∑Âãï„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ\n' + error.message);
                };
            }
        });
    </script>
</body>

</html>